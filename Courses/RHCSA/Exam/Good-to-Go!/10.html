<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>RHCSA Exam Lab 10: HTTP Server Configuration</title>
    <style>
        :root {
            --redhat-red: #cc0000;
            --redhat-dark: #1e1e1e;
            --redhat-light: #f0f0f0;
            --redhat-accent: #4CAF50;
            --redhat-blue: #007ACC;
            --panel-bg: #252525;
            --terminal-bg: #000;
            --border-color: #444;
            --current-step: #3a3a3a;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Red Hat Text', 'Overpass', sans-serif;
            background-color: var(--redhat-dark);
            color: var(--redhat-light);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            height: 100vh;
            overflow: hidden;
        }
        
        .lab-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 100%;
            margin: 0;
            background: var(--redhat-dark);
        }
        
        .header {
            background: linear-gradient(to right, #1e1e1e, #333);
            padding: 15px 20px;
            color: white;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        
        .header img {
            height: 30px;
            margin-right: 15px;
        }
        
        .header h1 {
            margin: 0;
            font-size: 1.5em;
            font-weight: normal;
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .guide-panel {
            width: 50%;
            padding: 20px;
            background: var(--panel-bg);
            overflow-y: auto;
            border-right: 1px solid var(--border-color);
        }
        
        .terminal-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            background: var(--panel-bg);
            position: relative;
        }
        
        .guide h2 {
            margin-top: 0;
            color: var(--redhat-accent);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .lab-intro {
            background: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid var(--redhat-accent);
        }
        
        .lab-intro h3 {
            margin-top: 0;
            color: var(--redhat-accent);
        }
        
        .requirements-panel {
            background: #2a2a2a;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border-left: 4px solid var(--redhat-red);
        }
        
        .requirements-panel h4 {
            margin-top: 0;
            color: var(--redhat-red);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }
        
        .requirement-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #252525;
            border-radius: 3px;
        }
        
        .requirement-item.completed {
            border-left: 3px solid var(--redhat-accent);
        }
        
        .requirement-item.partial {
            border-left: 3px solid #FFD700;
        }
        
        .requirement-checkbox {
            margin-right: 10px;
            color: var(--redhat-accent);
            min-width: 20px;
            text-align: center;
        }
        
        .requirement-label {
            flex: 1;
        }
        
        .guide-step {
            margin-bottom: 15px;
            padding: 15px;
            background: #333;
            border-left: 4px solid var(--redhat-blue);
            position: relative;
        }
        
        .guide-step.current {
            background: var(--current-step);
            border-left: 4px solid var(--redhat-accent);
        }
        
        .guide-step.completed {
            opacity: 0.7;
            border-left: 4px solid #666;
        }
        
        .guide-step h3 {
            margin-top: 0;
            color: var(--redhat-accent);
            display: flex;
            align-items: center;
        }
        
        .step-number {
            background: var(--redhat-accent);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.8em;
        }
        
        .step-status {
            margin-left: auto;
            font-size: 0.8em;
            padding: 3px 8px;
            border-radius: 3px;
        }
        
        .status-pending {
            background: #555;
            color: #ccc;
        }
        
        .status-current {
            background: var(--redhat-blue);
            color: white;
        }
        
        .status-completed {
            background: var(--redhat-accent);
            color: white;
        }
        
        .required-command {
            background: rgba(76, 175, 80, 0.1);
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
            border-left: 3px solid var(--redhat-accent);
        }
        
        .command-hint {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
            border-left: 3px solid var(--redhat-blue);
            font-family: 'Red Hat Mono', monospace;
        }
        
        .concept {
            background: #2a2a2a;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid var(--redhat-blue);
        }
        
        .concept h4 {
            margin-top: 0;
            color: var(--redhat-blue);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .concept-item {
            background: #252525;
            padding: 10px;
            border-radius: 5px;
            border-left: 2px solid var(--redhat-red);
        }
        
        .concept-item strong {
            color: var(--redhat-red);
            display: block;
            margin-bottom: 5px;
        }
        
        .terminal {
            background: var(--terminal-bg);
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            font-family: 'Red Hat Mono', monospace;
        }
        
        .command-line {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #333;
            border-top: 1px solid var(--border-color);
            margin-top: auto;
            flex-shrink: 0;
            position: relative;
        }
        
        #command-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--redhat-light);
            font-family: 'Red Hat Mono', monospace;
            font-size: 16px;
            outline: none;
            padding: 8px;
        }
        
        .prompt {
            color: var(--redhat-accent);
            white-space: nowrap;
            margin-right: 5px;
        }
        
        .file-content {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 3px;
            font-family: 'Red Hat Mono', monospace;
            white-space: pre;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .file-path {
            color: var(--redhat-blue);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        code {
            background: #1e1e1e;
            padding: 2px 5px;
            border-radius: 3px;
            color: var(--redhat-accent);
            font-family: 'Red Hat Mono', monospace;
        }
        
        .success {
            color: var(--redhat-accent);
            font-weight: bold;
        }
        
        .error {
            color: #FF5252;
        }
        
        .warning {
            color: #FFD700;
            font-weight: bold;
        }
        
        .completion-message {
            background: rgba(76, 175, 80, 0.2);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
            border: 1px solid var(--redhat-accent);
        }
        
        .progress-bar {
            height: 5px;
            background: #333;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--redhat-accent);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .hint-box {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #FFD700;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
        }
        
        .tab-completion {
            position: absolute;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 3px;
            max-height: 150px;
            overflow-y: auto;
            z-index: 100;
            font-family: 'Red Hat Mono', monospace;
            font-size: 14px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            bottom: 100%;
            left: 0;
            right: 0;
            margin-bottom: 5px;
        }
        
        .tab-completion-item {
            padding: 5px 10px;
            cursor: pointer;
        }
        
        .tab-completion-item:hover, .tab-completion-item.selected {
            background: #007ACC;
            color: white;
        }
        
        .vim-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .vim-container {
            display: flex;
            width: 90%;
            height: 80%;
            gap: 20px;
        }
        
        .vim-instructions {
            width: 30%;
            background: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            overflow-y: auto;
        }
        
        .vim-instructions h3 {
            margin-top: 0;
            color: var(--redhat-accent);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .vim-editor {
            width: 70%;
            background: #1e1e1e;
            border: 1px solid #444;
            display: flex;
            flex-direction: column;
            font-family: 'Red Hat Mono', monospace;
        }
        
        .vim-header {
            background: #333;
            padding: 5px 10px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .vim-content {
            flex: 1;
            padding: 10px;
            overflow: auto;
            white-space: pre;
            color: #ccc;
            position: relative;
        }
        
        .vim-command-line {
            display: flex;
            background: #333;
            padding: 5px;
            border-top: 1px solid #444;
        }
        
        .vim-prompt {
            color: #4CAF50;
            padding: 0 5px;
        }
        
        .vim-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-family: 'Red Hat Mono', monospace;
            outline: none;
        }
        
        .vim-status {
            background: #333;
            padding: 3px 10px;
            color: #ccc;
            font-size: 0.9em;
            border-top: 1px solid #444;
            display: flex;
            justify-content: space-between;
        }
        
        .vim-mode-indicator {
            color: #FFD700;
        }
        
        .vim-cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background: #ccc;
            animation: blink 1s infinite;
            vertical-align: middle;
        }
        
        .vim-esc-button {
            background: #555;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .vim-esc-button:hover {
            background: #666;
        }
        
        .vim-command-buttons {
            display: flex;
            gap: 10px;
        }
        
        .vim-command-button {
            background: #444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .vim-command-button:hover {
            background: #555;
        }
        
        .vim-mode-indicator.command-mode {
            color: #FFD700;
        }
        
        .vim-mode-indicator.insert-mode {
            color: #4CAF50;
        }
        
        .vim-textarea {
            position: absolute;
            top: 10px;
            left: 10px;
            width: calc(100% - 20px);
            height: calc(100% - 20px);
            background: transparent;
            border: none;
            color: #ccc;
            font-family: 'Red Hat Mono', monospace;
            resize: none;
            outline: none;
            white-space: pre;
            overflow: auto;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        @media (max-width: 992px) {
            .main-content {
                flex-direction: column;
            }
            
            .guide-panel, .terminal-panel {
                width: 100%;
                height: 50%;
            }
            
            .vim-container {
                width: 95%;
                height: 90%;
                flex-direction: column;
            }
            
            .vim-instructions, .vim-editor {
                width: 100%;
            }
            
            .vim-instructions {
                height: 30%;
            }
            
            .vim-editor {
                height: 70%;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@400;700&family=Red+Hat+Mono&display=swap" rel="stylesheet"/>
</head>
<body>
<div class="lab-container">
    <div class="header">
        <img alt="Red Hat Logo" src="https://www.redhat.com/profiles/rh/themes/redhatdotcom/img/logo.svg"/>
        <h1>RHCSA Exam Lab 10: HTTP Server Configuration</h1>
    </div>
    
    <div class="main-content">
        <div class="guide-panel">
            <h2>Lab Instructions</h2>
            
            <div class="lab-intro">
                <h3>Lab Objective</h3>
                <p>Configure an HTTP server on your system to meet the specified requirements. You will need to install the HTTP server package, configure web content, set up a virtual host, and manage the service.</p>
                <p><strong>Time Estimate:</strong> 15-20 minutes</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div id="progress-text">0% Complete</div>
            </div>

            <div class="requirements-panel">
                <h4>HTTP Server Configuration Requirements</h4>
                <div class="requirement-item" id="req-install">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Install HTTP server package (<code>httpd</code>)</span>
                </div>
                <div class="requirement-item" id="req-enable">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Enable HTTP service to start at boot</span>
                </div>
                <div class="requirement-item" id="req-download">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Download example.html from <code>http://ip/dir/example.html</code></span>
                </div>
                <div class="requirement-item" id="req-index">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Copy example.html to index.html</span>
                </div>
                <div class="requirement-item" id="req-vhost">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Configure virtual host in <code>/etc/httpd/conf/httpd.conf</code></span>
                </div>
                <div class="requirement-item" id="req-restart">
                    <span class="requirement-checkbox">‚òê</span>
                    <span class="requirement-label">Restart HTTP service</span>
                </div>
            </div>

            <div class="guide-step completed" id="step0">
                <h3>
                    <span class="step-number">0</span>
                    Lab Introduction
                    <span class="step-status status-completed">Completed</span>
                </h3>
                <p>Welcome to the RHCSA HTTP Server Configuration Lab. In this lab, you will configure an Apache HTTP server on a Red Hat Enterprise Linux system.</p>
                <p>Follow the steps in order. You must complete each step before moving to the next one.</p>
            </div>

            <div class="guide-step current" id="step1">
                <h3>
                    <span class="step-number">1</span>
                    Install and Enable HTTP Server
                    <span class="step-status status-current">Current Step</span>
                </h3>
                <p>First, install the Apache HTTP server package and enable it to start at boot.</p>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    yum install -y httpd
                </div>
                
                <p>Once the installation is complete, enable the service to start at boot:</p>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    systemctl enable httpd
                </div>

                <div class="concept">
                    <h4>Understanding Package Installation</h4>
                    <p>The <code>httpd</code> package provides the Apache web server. The <code>-y</code> flag automatically answers yes to confirmation prompts. Enabling the service ensures it starts automatically when the system boots.</p>
                </div>
            </div>

            <div class="guide-step" id="step2">
                <h3>
                    <span class="step-number">2</span>
                    Configure Web Content
                    <span class="step-status status-pending">Pending</span>
                </h3>
                <p>Now let's configure the web content for our server.</p>
                
                <div class="hint-box">
                    <strong>Navigate to the web root directory:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    cd /var/www/html
                </div>
                
                <div class="hint-box">
                    <strong>Download the example page:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    wget http://172.24.40.1/dir/example.html
                </div>
                
                <div class="hint-box">
                    <strong>Create index.html from the example:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    cp example.html index.html
                </div>

                <div class="concept">
                    <h4>Understanding Web Content</h4>
                    <p>The <code>/var/www/html</code> directory is the default document root for Apache. The <code>index.html</code> file is served when clients access the root URL of your site. You can verify content with <code>ls -l</code> and <code>cat index.html</code>.</p>
                </div>
            </div>

            <div class="guide-step" id="step3">
                <h3>
                    <span class="step-number">3</span>
                    Configure Virtual Host
                    <span class="step-status status-pending">Pending</span>
                </h3>
                <p>Now let's configure a virtual host for our web server.</p>
                
                <div class="hint-box">
                    <strong>Edit the Apache configuration file:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    vim /etc/httpd/conf/httpd.conf
                </div>
                
                <p>Add these directives at the end of the file:</p>
                
                <div class="file-content">NameVirtualHost 172.24.40.40:80
&lt;VirtualHost 172.24.40.40:80&gt;
    DocumentRoot /var/www/html
    ServerName station.domain40.example.com
&lt;/VirtualHost&gt;</div>
                
                <p>To save and exit vim:</p>
                <ol>
                    <li>Press <code>ESC</code> to ensure you're in command mode</li>
                    <li>Type <code>:wq</code> and press <code>Enter</code> to write and quit</li>
                </ol>

                <div class="concept">
                    <h4>Understanding Virtual Hosts</h4>
                    <p>Virtual hosts allow Apache to serve different content based on the requested hostname or IP address. Key directives:</p>
                    <ul>
                        <li><code>NameVirtualHost</code>: Specifies IP address and port for name-based virtual hosts</li>
                        <li><code>VirtualHost</code>: Container for directives that apply to a specific site</li>
                        <li><code>DocumentRoot</code>: Defines where the web files are stored</li>
                        <li><code>ServerName</code>: Specifies the hostname that this virtual host should serve</li>
                    </ul>
                </div>
            </div>

            <div class="guide-step" id="step4">
                <h3>
                    <span class="step-number">4</span>
                    Start and Verify Service
                    <span class="step-status status-pending">Pending</span>
                </h3>
                <p>Finally, let's start the HTTP service and verify our configuration.</p>
                
                <div class="hint-box">
                    <strong>Start the HTTP service:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    systemctl start httpd
                </div>
                
                <div class="hint-box">
                    <strong>Restart the HTTP service (after configuration changes):</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    systemctl restart httpd
                </div>
                
                <div class="hint-box">
                    <strong>Verify the service is running:</strong>
                </div>
                
                <div class="required-command">
                    <strong>Required Command:</strong>
                </div>
                
                <div class="command-hint">
                    systemctl status httpd
                </div>

                <div class="concept">
                    <h4>Service Management</h4>
                    <p>After making configuration changes, you must restart the service for them to take effect. The status command shows whether the service is running and any recent log messages. You can also test the web server locally with <code>curl http://localhost</code>.</p>
                </div>
            </div>
            
            <div id="completion-message" class="completion-message" style="display: none;">
                <h3>üéâ Lab Completed Successfully!</h3>
                <p>All HTTP server configuration requirements have been met.</p>
                <p>Your web server is now accessible at http://station.domain40.example.com</p>
                <p>You can now proceed to the next lab.</p>
            </div>
        </div>
        
        <div class="terminal-panel">
            <div class="terminal" id="terminal-output">
                <div><span class="prompt">[root@station ~]#</span> Welcome to RHCSA Lab 10: HTTP Server Configuration</div>
                <div><span class="prompt">[root@station ~]#</span> This is a guided lab. Follow the instructions on the left.</div>
                <div><span class="prompt">[root@station ~]#</span> You must complete each step in order.</div>
                <div><span class="prompt">[root@station ~]#</span> Current step: Install and Enable HTTP Server</div>
                <div><span class="prompt">[root@station ~]#</span> Type: <code>yum install -y httpd</code></div>
                <div><span class="prompt">[root@station ~]#</span> <span class="success">Tip:</span> Press <code>Tab</code> for command and path completion</div>
            </div>
            <div class="command-line">
                <span class="prompt">[root@station ~]#</span>
                <input autofocus id="command-input" placeholder="Type the command shown in the current step..." type="text"/>
                <div id="tab-completion" class="tab-completion" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>

<!-- Vim Editor Overlay -->
<div id="vim-overlay" class="vim-overlay" style="display: none;">
    <div class="vim-container">
        <div class="vim-instructions" id="vim-instructions">
            <h3>Vim Editor Instructions</h3>
            <div id="vim-instructions-content"></div>
        </div>
        
        <div class="vim-editor">
            <div class="vim-header">
                <span id="vim-filename">filename</span>
                <div class="vim-command-buttons">
                    <button class="vim-command-button" id="vim-insert-button">i (Insert)</button>
                    <button class="vim-esc-button" id="vim-esc-button">ESC</button>
                    <span id="vim-close-btn" style="cursor: pointer; margin-left: 10px;">√ó</span>
                </div>
            </div>
            <div class="vim-content" id="vim-content">
                <textarea id="vim-textarea" class="vim-textarea" spellcheck="false"></textarea>
            </div>
            <div class="vim-command-line">
                <input type="text" class="vim-input" id="vim-input" placeholder="Type :wq to save and exit"/>
            </div>
            <div class="vim-status">
                <span class="vim-mode-indicator command-mode" id="vim-mode-indicator">COMMAND MODE</span>
                <span id="vim-cursor-position">1,1</span>
            </div>
        </div>
    </div>
</div>

<script>
    const commandInput = document.getElementById('command-input');
    const terminalOutput = document.getElementById('terminal-output');
    const requirementItems = document.querySelectorAll('.requirement-item');
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    const completionMessage = document.getElementById('completion-message');
    const steps = document.querySelectorAll('.guide-step');
    const tabCompletion = document.getElementById('tab-completion');
    
    // Vim editor elements
    const vimOverlay = document.getElementById('vim-overlay');
    const vimInstructions = document.getElementById('vim-instructions');
    const vimInstructionsContent = document.getElementById('vim-instructions-content');
    const vimFilename = document.getElementById('vim-filename');
    const vimContent = document.getElementById('vim-content');
    const vimTextarea = document.getElementById('vim-textarea');
    const vimInput = document.getElementById('vim-input');
    const vimModeIndicator = document.getElementById('vim-mode-indicator');
    const vimCursorPosition = document.getElementById('vim-cursor-position');
    const vimCloseBtn = document.getElementById('vim-close-btn');
    const vimEscButton = document.getElementById('vim-esc-button');
    const vimInsertButton = document.getElementById('vim-insert-button');
    
    let commandHistory = [];
    let historyIndex = -1;
    let currentStep = 1;
    let tabCompletionIndex = -1;
    let tabCompletionItems = [];
    let lastTabInput = '';
    
    // Available commands for tab completion
    const availableCommands = [
        'yum', 'systemctl', 'cd', 'ls', 'wget', 'cp', 'vim', 'cat', 'clear', 'help'
    ];
    
    // Available file paths for tab completion
    const filePaths = {
        '/etc/': ['httpd/', 'resolv.conf'],
        '/etc/httpd/': ['conf/', 'conf.d/'],
        '/etc/httpd/conf/': ['httpd.conf'],
        '/var/': ['www/'],
        '/var/www/': ['html/', 'cgi-bin/'],
        '/var/www/html/': ['example.html', 'index.html']
    };
    
    // Track configuration state
    const configState = {
        install: false,
        enable: false,
        download: false,
        index: false,
        vhost: false,
        restart: false
    };
    
    // Track which commands have been executed for current step
    const stepCommandTracker = {
        1: { 'yum install -y httpd': false, 'systemctl enable httpd': false },
        2: { 'cd /var/www/html': false, 'wget http://172.24.40.1/dir/example.html': false, 'cp example.html index.html': false },
        3: { 'vim /etc/httpd/conf/httpd.conf': false },
        4: { 'systemctl start httpd': false, 'systemctl restart httpd': false, 'systemctl status httpd': false }
    };
    
    // Simulated file contents
    let httpdConfContent = `#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.4/> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.4/mod/directives.html>
# for a discussion of each configuration directive.
#
# See the httpd.conf(5) man page for more information.
#

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 80

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding \`LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by \`httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
Include conf.modules.d/*.conf

#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User apache
Group apache

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin root@localhost

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
#ServerName www.example.com:80

#
# Deny access to the entirety of your server's filesystem. You must
# explicitly permit access to web content directories in other 
# <Directory> blocks below.
#
<Directory />
    AllowOverride none
    Require all denied
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/var/www/html"

#
# Relax access to content within /var/www.
#
<Directory "/var/www">
    AllowOverride None
    # Allow open access:
    Require all granted
</Directory>

# Further relax access to the default document root:
<Directory "/var/www/html">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.4/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride None

    #
    # Controls who can get stuff from this server.
    #
    Require all granted
</Directory>

# Additional configuration files
IncludeOptional conf.d/*.conf`;
    
    let webContent = "<!DOCTYPE html>\n<html>\n<head>\n    <title>Example Page</title>\n</head>\n<body>\n    <h1>Welcome to RHCSA Lab 10</h1>\n    <p>This is the example page for HTTP server configuration.</p>\n</body>\n</html>";
    
    // Vim editor state
    let vimState = {
        file: '',
        content: '',
        cursorPos: 0,
        mode: 'command',
        isEditing: false,
        fileType: ''
    };
    
    const commands = {
        'yum': (args) => {
            if (args[0] === "install" && args[1] === "-y" && args[2] === "httpd") {
                if (currentStep === 1) {
                    stepCommandTracker[1]['yum install -y httpd'] = true;
                    configState.install = true;
                    updateRequirements();
                    if (allStepCommandsDone(1)) completeStep(1);
                    return "Installing httpd...\nComplete!";
                } else if (currentStep > 1) {
                    configState.install = true;
                    updateRequirements();
                    return "httpd is already installed.";
                } else {
                    return "Please complete the previous steps first.";
                }
            }
            return `Usage: yum [options] COMMAND`;
        },
        
        'systemctl': (args) => {
            if (args[0] === "enable" && args[1] === "httpd") {
                if (currentStep === 1 || currentStep > 1) {
                    stepCommandTracker[1]['systemctl enable httpd'] = true;
                    configState.enable = true;
                    updateRequirements();
                    if (currentStep === 1 && allStepCommandsDone(1)) completeStep(1);
                    return "Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service ‚Üí /usr/lib/systemd/system/httpd.service.";
                } else {
                    return "Please complete the previous steps first.";
                }
            } else if (args[0] === "start" && args[1] === "httpd") {
                if (currentStep === 4 || currentStep > 4) {
                    stepCommandTracker[4]['systemctl start httpd'] = true;
                    return "Starting httpd (via systemctl): httpd.service.";
                } else {
                    return "Please complete the previous steps first.";
                }
            } else if (args[0] === "restart" && args[1] === "httpd") {
                if (currentStep === 4 || currentStep > 4) {
                    stepCommandTracker[4]['systemctl restart httpd'] = true;
                    configState.restart = true;
                    updateRequirements();
                    if (allStepCommandsDone(4)) completeStep(4);
                    return "Restarting httpd (via systemctl): httpd.service.";
                } else {
                    return "Please complete the previous steps first.";
                }
            } else if (args[0] === "status" && args[1] === "httpd") {
                if (currentStep === 4 || currentStep > 4) {
                    stepCommandTracker[4]['systemctl status httpd'] = true;
                    if (currentStep === 4 && allStepCommandsDone(4)) completeStep(4);
                }
                return "‚óè httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)\n   Active: active (running) since Tue 2023-10-10 14:30:00 UTC; 1min ago\n     Docs: man:httpd(8)\n           man:apachectl(8)\n Main PID: 1234 (httpd)\n   Status: \"Total requests: 0; Current requests/sec: 0; Current traffic:   0 B/sec\"\n    Tasks: 213 (limit: 4915)\n   Memory: 25.3M\n   CGroup: /system.slice/httpd.service\n           ‚îú‚îÄ1234 /usr/sbin/httpd -DFOREGROUND\n           ‚îú‚îÄ1235 /usr/sbin/httpd -DFOREGROUND\n           ‚îú‚îÄ1236 /usr/sbin/httpd -DFOREGROUND\n           ‚îú‚îÄ1237 /usr/sbin/httpd -DFOREGROUND\n           ‚îî‚îÄ1238 /usr/sbin/httpd -DFOREGROUND";
            }
            return `Unknown operation '${args.join(' ')}'`;
        },
        
        'cd': (args) => {
            if (args.length === 0 || args[0] === "~") {
                return "";
            } else if (args[0] === "/var/www/html") {
                if (currentStep === 2 || currentStep > 2) {
                    stepCommandTracker[2]['cd /var/www/html'] = true;
                    if (currentStep === 2 && allStepCommandsDone(2)) completeStep(2);
                    return "";
                } else {
                    return "Please complete the previous steps first.";
                }
            }
            return `bash: cd: ${args[0]}: No such file or directory`;
        },
        
        'ls': (args) => {
            if (args.length === 0) {
                return "Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos";
            } else if (args[0] === "/var/www/html") {
                if (configState.download) {
                    return "example.html  index.html";
                } else {
                    return "example.html";
                }
            } else if (args[0] === "-l") {
                if (configState.download) {
                    return "-rw-r--r--. 1 root root  234 Oct 10 14:30 example.html\n-rw-r--r--. 1 root root  234 Oct 10 14:30 index.html";
                } else if (configState.index) {
                    return "-rw-r--r--. 1 root root  234 Oct 10 14:30 index.html";
                }
            }
            return `ls: cannot access '${args[0]}': No such file or directory`;
        },
        
        'wget': (args) => {
            if (args[0] === "http://172.24.40.1/dir/example.html" || args[0] === "http://ip/dir/example.html") {
                if (currentStep === 2 || currentStep > 2) {
                    stepCommandTracker[2]['wget http://172.24.40.1/dir/example.html'] = true;
                    configState.download = true;
                    updateRequirements();
                    if (currentStep === 2 && allStepCommandsDone(2)) completeStep(2);
                    return "2023-10-10 14:30:00 (1.23 MB/s) - 'example.html' saved [234/234]";
                } else {
                    return "Please complete the previous steps first.";
                }
            }
            return `wget: unable to resolve host address`;
        },
        
        'cp': (args) => {
            if (args[0] === "example.html" && args[1] === "index.html") {
                if (currentStep === 2 || currentStep > 2) {
                    stepCommandTracker[2]['cp example.html index.html'] = true;
                    configState.index = true;
                    updateRequirements();
                    if (currentStep === 2 && allStepCommandsDone(2)) completeStep(2);
                    return "";
                } else {
                    return "Please complete the previous steps first.";
                }
            }
            return `cp: cannot stat '${args[0]}': No such file or directory`;
        },
        
        'cat': (args) => {
            if (args[0] === "/var/www/html/index.html" || args[0] === "/var/www/html/example.html") {
                return webContent;
            } else if (args[0] === "/etc/httpd/conf/httpd.conf") {
                return httpdConfContent;
            }
            return `cat: ${args[0]}: No such file or directory`;
        },
        
        'vim': (args) => {
            if (args.length === 0) {
                return "vim: Please specify a file to edit";
            }
            
            const file = args[0];
            let content = '';
            
            if (file === "/etc/httpd/conf/httpd.conf") {
                content = httpdConfContent;
                if (currentStep === 3 || currentStep > 3) {
                    stepCommandTracker[3]['vim /etc/httpd/conf/httpd.conf'] = true;
                    if (currentStep === 3) completeStep(3);
                    const result = openVimEditor(file, content, 'httpd');
                    return result;
                } else {
                    return "Please complete the previous steps first.";
                }
            } else if (file === "local.repo") {
                return "vim: cannot open local.repo for writing: No such file or directory";
            }
            
            return `vim: cannot open ${file} for writing: No such file or directory`;
        },
        
        'clear': () => {
            terminalOutput.innerHTML = '';
            addTerminalOutput('<span class="prompt">[root@station ~]#</span> Terminal cleared');
            return '';
        },
        
        'help': () => {
            return "Available commands: yum, systemctl, cd, ls, wget, cp, vim, cat, clear, help";
        }
    };
    
    // Helper function to check if all commands for a step are done
    function allStepCommandsDone(step) {
        const tracker = stepCommandTracker[step];
        for (const cmd in tracker) {
            if (!tracker[cmd]) return false;
        }
        return true;
    }
    
    // Function to open the Vim editor
    function openVimEditor(filename, content, fileType) {
        vimState.file = filename;
        vimState.content = content;
        vimState.fileType = fileType;
        vimState.mode = 'command';
        vimState.isEditing = true;
        
        vimFilename.textContent = filename;
        vimTextarea.value = content;
        
        if (fileType === 'httpd') {
            vimInstructionsContent.innerHTML = `
                <p>Edit the Apache configuration file to set up a virtual host.</p>
                <p>Add these directives at the end of the file:</p>
                <div class="file-content">NameVirtualHost 172.24.40.40:80
&lt;VirtualHost 172.24.40.40:80&gt;
    DocumentRoot /var/www/html
    ServerName station.domain40.example.com
&lt;/VirtualHost&gt;</div>
                <p><strong>Vim Commands:</strong></p>
                <ul>
                    <li>Press <code>i</code> to enter Insert mode</li>
                    <li>Type the required configuration</li>
                    <li>Press <code>ESC</code> to return to Command mode</li>
                    <li>Type <code>:wq</code> and press <code>Enter</code> to save and exit</li>
                </ul>
                <p><strong>Steps:</strong></p>
                <ol>
                    <li>Press <code>G</code> to go to the end of the file</li>
                    <li>Press <code>i</code> to enter Insert mode</li>
                    <li>Type the virtual host configuration</li>
                    <li>Press <code>ESC</code> to return to Command mode</li>
                    <li>Type <code>:wq</code> and press <code>Enter</code></li>
                </ol>
            `;
        }
        
        vimOverlay.style.display = 'flex';
        vimState.mode = 'command';
        vimModeIndicator.textContent = 'COMMAND MODE';
        vimModeIndicator.className = 'vim-mode-indicator command-mode';
        
        setTimeout(() => {
            vimInput.focus();
            updateVimCursorPosition();
        }, 100);
        
        return `Opening ${filename} in Vim editor...`;
    }
    
    // Function to handle Vim commands
    function handleVimCommand(command) {
        if (command === 'w' || command === 'write') {
            if (vimState.file === "/etc/httpd/conf/httpd.conf") {
                httpdConfContent = vimTextarea.value;
                if (httpdConfContent.includes("NameVirtualHost 172.24.40.40:80") && 
                    httpdConfContent.includes("<VirtualHost 172.24.40.40:80>") &&
                    httpdConfContent.includes("DocumentRoot /var/www/html") &&
                    httpdConfContent.includes("ServerName station.domain40.example.com")) {
                    configState.vhost = true;
                    updateRequirements();
                }
                return "File saved";
            }
        } else if (command === 'q' || command === 'quit') {
            closeVimEditor();
            return "";
        } else if (command === 'wq') {
            const saveMsg = handleVimCommand('w');
            closeVimEditor();
            return saveMsg + " and exiting";
        } else if (command === 'q!') {
            closeVimEditor();
            return "Exiting without saving";
        }
        return `Not an editor command: ${command}`;
    }
    
    // Function to close the Vim editor
    function closeVimEditor() {
        vimOverlay.style.display = 'none';
        vimState.isEditing = false;
        commandInput.focus();
    }
    
    // Function to update Vim cursor position display
    function updateVimCursorPosition() {
        const text = vimTextarea.value;
        const cursorPos = vimTextarea.selectionStart;
        const lines = text.substring(0, cursorPos).split('\n');
        const line = lines.length;
        const column = lines[lines.length - 1].length + 1;
        vimCursorPosition.textContent = `${line},${column}`;
    }
    
    // Function to update requirements display
    function updateRequirements() {
        if (configState.install) {
            document.getElementById('req-install').classList.add('completed');
            document.getElementById('req-install').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        if (configState.enable) {
            document.getElementById('req-enable').classList.add('completed');
            document.getElementById('req-enable').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        if (configState.download) {
            document.getElementById('req-download').classList.add('completed');
            document.getElementById('req-download').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        if (configState.index) {
            document.getElementById('req-index').classList.add('completed');
            document.getElementById('req-index').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        if (configState.vhost) {
            document.getElementById('req-vhost').classList.add('completed');
            document.getElementById('req-vhost').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        if (configState.restart) {
            document.getElementById('req-restart').classList.add('completed');
            document.getElementById('req-restart').querySelector('.requirement-checkbox').textContent = '‚úì';
        }
        
        const completedCount = Object.values(configState).filter(v => v).length;
        const progressPercent = (completedCount / Object.keys(configState).length) * 100;
        progressFill.style.width = `${progressPercent}%`;
        progressText.textContent = `${Math.round(progressPercent)}% Complete`;
        
        if (completedCount === Object.keys(configState).length) {
            completionMessage.style.display = 'block';
        }
    }
    
    // Function to complete a step
    function completeStep(step) {
        if (step === currentStep) {
            steps[step].classList.remove('current');
            steps[step].classList.add('completed');
            steps[step].querySelector('.step-status').textContent = 'Completed';
            steps[step].querySelector('.step-status').className = 'step-status status-completed';
            
            currentStep++;
            
            if (currentStep < steps.length) {
                steps[currentStep].classList.add('current');
                steps[currentStep].querySelector('.step-status').textContent = 'Current Step';
                steps[currentStep].querySelector('.step-status').className = 'step-status status-current';
                
                addTerminalOutput(`[root@station ~]# Step ${step} completed. Moving to step ${currentStep}.`);
                
                // Show the first command for the next step
                if (currentStep === 2) {
                    addTerminalOutput(`[root@station ~]# Next: cd /var/www/html`);
                } else if (currentStep === 3) {
                    addTerminalOutput(`[root@station ~]# Next: vim /etc/httpd/conf/httpd.conf`);
                } else if (currentStep === 4) {
                    addTerminalOutput(`[root@station ~]# Next: systemctl start httpd`);
                }
            }
        }
    }
    
    // Function to add output to the terminal
    function addTerminalOutput(text) {
        const newLine = document.createElement('div');
        newLine.innerHTML = text;
        terminalOutput.appendChild(newLine);
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }
    
    // Function to handle command execution
    function executeCommand(input) {
        const trimmedInput = input.trim();
        if (!trimmedInput) return;
        
        commandHistory.push(trimmedInput);
        historyIndex = commandHistory.length;
        
        addTerminalOutput(`<span class="prompt">[root@station ~]#</span> ${trimmedInput}`);
        
        const parts = trimmedInput.split(' ');
        const command = parts[0];
        const args = parts.slice(1);
        
        if (commands.hasOwnProperty(command)) {
            const result = commands[command](args);
            if (result) {
                addTerminalOutput(result);
            }
        } else {
            addTerminalOutput(`bash: ${command}: command not found`);
            addTerminalOutput('Type "help" for available commands');
        }
    }
    
    // Function to handle tab completion
    function handleTabCompletion() {
        const input = commandInput.value;
        
        if (input === lastTabInput && tabCompletionItems.length > 1) {
            tabCompletionIndex = (tabCompletionIndex + 1) % tabCompletionItems.length;
            showTabCompletion(tabCompletionItems, tabCompletionIndex);
            return;
        }
        
        lastTabInput = input;
        const parts = input.split(' ');
        const lastPart = parts[parts.length - 1];
        
        tabCompletionIndex = 0;
        
        if (parts.length === 1 && lastPart === '') {
            tabCompletionItems = availableCommands;
            showTabCompletion(tabCompletionItems, 0);
            return;
        }
        
        if (parts.length === 1) {
            tabCompletionItems = availableCommands.filter(cmd => 
                cmd.startsWith(lastPart)
            );
            
            if (tabCompletionItems.length > 0) {
                showTabCompletion(tabCompletionItems, 0);
            } else {
                hideTabCompletion();
            }
            return;
        }
        
        const pathParts = lastPart.split('/');
        let basePath = pathParts.slice(0, -1).join('/') || '/';
        const partialName = pathParts[pathParts.length - 1];
        
        if (!basePath.endsWith('/') && basePath !== '/') {
            basePath += '/';
        }
        
        const availablePaths = filePaths[basePath] || [];
        tabCompletionItems = availablePaths.filter(path => 
            path.startsWith(partialName)
        );
        
        if (tabCompletionItems.length > 0) {
            showTabCompletion(tabCompletionItems, 0);
        } else {
            hideTabCompletion();
        }
    }
    
    // Function to show tab completion suggestions
    function showTabCompletion(items, selectedIndex) {
        if (items.length === 0) {
            hideTabCompletion();
            return;
        }
        
        if (items.length === 1) {
            completeWithSuggestion(items[0]);
            hideTabCompletion();
            return;
        }
        
        tabCompletion.innerHTML = '';
        items.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = `tab-completion-item ${index === selectedIndex ? 'selected' : ''}`;
            div.textContent = item;
            div.addEventListener('click', () => {
                completeWithSuggestion(item);
                hideTabCompletion();
            });
            tabCompletion.appendChild(div);
        });
        
        tabCompletion.style.display = 'block';
        
        tabCompletionIndex = selectedIndex;
        tabCompletionItems = items;
    }
    
    // Function to hide tab completion
    function hideTabCompletion() {
        tabCompletion.style.display = 'none';
        tabCompletionItems = [];
        tabCompletionIndex = -1;
    }
    
    // Function to complete the input with a suggestion
    function completeWithSuggestion(suggestion) {
        const input = commandInput.value;
        const parts = input.split(' ');
        const lastPart = parts[parts.length - 1];
        
        if (parts.length === 1) {
            commandInput.value = suggestion + ' ';
        } else {
            const pathParts = lastPart.split('/');
            const basePath = pathParts.slice(0, -1).join('/');
            
            if (basePath) {
                parts[parts.length - 1] = basePath + '/' + suggestion;
            } else {
                parts[parts.length - 1] = suggestion;
            }
            
            commandInput.value = parts.join(' ') + (suggestion.endsWith('/') ? '' : ' ');
        }
        
        commandInput.selectionStart = commandInput.selectionEnd = commandInput.value.length;
        lastTabInput = commandInput.value;
    }
    
    // Event listeners
    commandInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            executeCommand(commandInput.value);
            commandInput.value = '';
            hideTabCompletion();
            lastTabInput = '';
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (commandHistory.length > 0) {
                if (historyIndex > 0) {
                    historyIndex--;
                }
                commandInput.value = commandHistory[historyIndex] || '';
            }
            hideTabCompletion();
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
                historyIndex++;
                commandInput.value = commandHistory[historyIndex];
            } else {
                historyIndex = commandHistory.length;
                commandInput.value = '';
            }
            hideTabCompletion();
        } else if (e.key === 'Tab') {
            e.preventDefault();
            handleTabCompletion();
        } else if (e.key === 'Escape') {
            hideTabCompletion();
        } else {
            setTimeout(() => {
                if (commandInput.value !== lastTabInput) {
                    hideTabCompletion();
                }
            }, 0);
        }
    });
    
    // Hide tab completion when clicking outside
    document.addEventListener('click', (e) => {
        if (!tabCompletion.contains(e.target) && e.target !== commandInput) {
            hideTabCompletion();
        }
    });
    
    // Vim editor event listeners
    vimCloseBtn.addEventListener('click', () => {
        closeVimEditor();
    });
    
    vimEscButton.addEventListener('click', () => {
        vimState.mode = 'command';
        vimModeIndicator.textContent = 'COMMAND MODE';
        vimModeIndicator.className = 'vim-mode-indicator command-mode';
        vimTextarea.blur();
        vimInput.focus();
        updateVimCursorPosition();
    });
    
    vimInsertButton.addEventListener('click', () => {
        vimState.mode = 'insert';
        vimModeIndicator.textContent = 'INSERT MODE';
        vimModeIndicator.className = 'vim-mode-indicator insert-mode';
        vimInput.blur();
        vimTextarea.focus();
        updateVimCursorPosition();
    });
    
    // Handle vim mode switching with keyboard
    vimTextarea.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            e.preventDefault();
            vimState.mode = 'command';
            vimModeIndicator.textContent = 'COMMAND MODE';
            vimModeIndicator.className = 'vim-mode-indicator command-mode';
            vimTextarea.blur();
            vimInput.focus();
        }
        updateVimCursorPosition();
    });
    
    // Handle vim command input
    vimInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const command = vimInput.value.trim();
            if (command === 'i') {
                vimState.mode = 'insert';
                vimModeIndicator.textContent = 'INSERT MODE';
                vimModeIndicator.className = 'vim-mode-indicator insert-mode';
                vimInput.blur();
                vimTextarea.focus();
                vimInput.value = '';
            } else if (command.startsWith(':')) {
                const actualCommand = command.substring(1);
                const result = handleVimCommand(actualCommand);
                if (result) {
                    addTerminalOutput(result);
                }
                vimInput.value = '';
            } else if (command === 'G') {
                // Go to end of file
                vimTextarea.selectionStart = vimTextarea.value.length;
                vimTextarea.selectionEnd = vimTextarea.value.length;
                vimInput.value = '';
                updateVimCursorPosition();
            } else if (command) {
                vimInput.value = '';
            }
        } else if (e.key === 'i' && vimInput.value === '' && vimState.mode === 'command') {
            e.preventDefault();
            vimState.mode = 'insert';
            vimModeIndicator.textContent = 'INSERT MODE';
            vimModeIndicator.className = 'vim-mode-indicator insert-mode';
            vimInput.blur();
            vimTextarea.focus();
        }
    });
    
    vimTextarea.addEventListener('click', () => {
        if (vimState.mode === 'command') {
            vimInput.focus();
        } else {
            updateVimCursorPosition();
        }
    });
    
    vimTextarea.addEventListener('keyup', () => {
        if (vimState.mode === 'insert') {
            updateVimCursorPosition();
        }
    });
    
    // Initialize the lab
    updateRequirements();
</script>
</body>
</html>